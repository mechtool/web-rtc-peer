(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{JSOT:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J");class o{}var a=t("pMnS"),i=t("SVse"),c=t("NvT6"),s=t("W5yJ"),u=t("/HVE"),b=t("omvX"),r=t("FbN9"),d=t("BzsH"),p=t("2/pp"),v=t("xQwi"),m=t("VYsW"),h=t("ZJFI"),f=t("Mr+X"),g=t("Gi4r");class A{constructor(n,l){this.videoPlayer=n,this.appContext=l,this.startBlock=!1,this.icons={video:["video-off","video"],audio:["audio-off","audio"]},this.video=this.icons.video[1],this.audio=this.icons.audio[1]}ngOnInit(){this.context.className.active=!0}startVisual(){Object.keys(this.context.visual).sort((n,l)=>+n-+l).forEach(n=>{let l=setTimeout(()=>{let t=this.context.visual[n];this.video=this.icons.video[t.video],this.audio=this.icons.audio[t.audio],this.appContext.appChangeRef.markForCheck(),clearTimeout(l)},+n-this.context.startTime)})}onLoadedData(){this.startBlock=!0,this.context.visual&&this.startVisual(),this.appContext.appChangeRef.markForCheck()}onEnded(){this.startBlock=this.context.className.fixed=this.context.className.active=!1,this.appContext.appChangeRef.markForCheck()}}class x{constructor(n,l,t){this.appContext=n,this.sanitizer=l,this.route=t,this.dataLoaded=!1,this.activeVideoBlocks=[]}checkFixed(){this.activeVideoBlocks.length>1&&this.activeVideoBlocks.forEach(n=>{n.local&&(n.className.fixed=!0)})}ngOnInit(){let n=this;this.route.data.subscribe(l=>{let t=Math.min(...Object.values(l.messageData.map(n=>n.mess.startTime)));l.messageData.forEach(l=>{let e=setTimeout(()=>{n.activeVideoBlocks.push({startTime:l.mess.startTime,visual:l.mess.visual,src:n.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(l.result)),uid:l.mess.uid,local:l.mess.local,contact:l.mess.local?n.appContext.activeMessage.sender:n.appContext.activeMessage.receivers.find(n=>n.uid===l.mess.uid),className:{local:l.mess.local,[l.mess.uid]:!0,false:!0,fixed:!1}}),n.checkFixed(),clearTimeout(e),n.appContext.appChangeRef.markForCheck()},l.mess.startTime-t)})})}}var C=e.ob({encapsulation:0,styles:[["div.video-block-container.local.active.fixed[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:200px;height:200px;z-index:5}div.video-block-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;width:100%;height:100%;position:relative;transition:all .3s}.active-video-block[_ngcontent-%COMP%]{width:100%;height:100%}.video-block-toolbar[_ngcontent-%COMP%]{z-index:6;position:absolute;top:0;left:0;background:0 0;color:#fff}video.video-element[_ngcontent-%COMP%]{position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:50% 50%;object-position:50% 50%}.video-block-spinner[_ngcontent-%COMP%]{position:absolute}div.video-metadata-container.local.active.fixed[_nghost-%COMP%]     .contact-name, div.video-metadata-container.local.active.fixed   [_nghost-%COMP%]     .contact-name{display:none}"]],data:{}});function k(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,1,"mat-spinner",[["class","video-block-spinner mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,c.d,c.b)),e.pb(1,114688,null,0,s.d,[e.k,u.a,[2,i.d],[2,b.a],s.a],null,null)],(function(n,l){n(l,1,0)}),(function(n,l){n(l,0,0,e.Cb(l,1)._noopAnimations,e.Cb(l,1).diameter,e.Cb(l,1).diameter)}))}function y(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,11,"div",[["class","active-video-block"]],null,null,null,null,null)),(n()(),e.qb(1,0,null,null,9,"mat-toolbar",[["class","video-block-toolbar mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,r.b,r.a)),e.pb(2,4243456,null,1,d.a,[e.k,u.a,i.d],null,null),e.Hb(603979776,1,{_toolbarRows:1}),(n()(),e.qb(4,0,null,0,1,"app-contact",[],null,null,null,p.b,p.a)),e.pb(5,114688,null,0,v.a,[e.h,m.a,h.a,e.z],{context:[0,"context"]},null),(n()(),e.qb(6,0,null,0,0,"span",[["class","example-spacer"]],null,null,null,null,null)),(n()(),e.qb(7,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),e.pb(8,9158656,null,0,g.b,[e.k,g.d,[8,null],[2,g.a],[2,e.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),e.qb(9,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),e.pb(10,9158656,null,0,g.b,[e.k,g.d,[8,null],[2,g.a],[2,e.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),e.qb(11,0,null,null,0,"video",[["autoplay",""],["class","video-element"],["playsinline",""]],[[8,"src",4]],[[null,"loadeddata"],[null,"ended"]],(function(n,l,t){var e=!0,o=n.component;return"loadeddata"===l&&(e=!1!==o.onLoadedData()&&e),"ended"===l&&(e=!1!==o.onEnded()&&e),e}),null,null))],(function(n,l){var t=l.component;n(l,5,0,t.context.contact),n(l,8,0,t.video),n(l,10,0,t.audio)}),(function(n,l){var t=l.component;n(l,1,0,e.Cb(l,2)._toolbarRows.length>0,0===e.Cb(l,2)._toolbarRows.length),n(l,7,0,e.Cb(l,8).inline,"primary"!==e.Cb(l,8).color&&"accent"!==e.Cb(l,8).color&&"warn"!==e.Cb(l,8).color),n(l,9,0,e.Cb(l,10).inline,"primary"!==e.Cb(l,10).color&&"accent"!==e.Cb(l,10).color&&"warn"!==e.Cb(l,10).color),n(l,11,0,t.context.src)}))}function w(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,6,"div",[["class","video-block-container"]],null,null,null,null,null)),e.Gb(512,null,i.y,i.z,[e.q,e.r,e.k,e.C]),e.pb(2,278528,null,0,i.j,[i.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),e.gb(16777216,null,null,1,null,k)),e.pb(4,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,y)),e.pb(6,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,2,0,"video-block-container",t.context.className),n(l,4,0,!t.startBlock),n(l,6,0,t.context.className.active)}),null)}var O=t("cUpR"),q=t("iInd"),M=e.ob({encapsulation:0,styles:[["div.video-player-container[_ngcontent-%COMP%]{display:flex;justify-content:stretch;align-items:stretch;width:100%;height:100%}div.video-metadata-container.fixed[_ngcontent-%COMP%]{flex:initial}div.video-metadata-container[_ngcontent-%COMP%]{flex:1 1 0}@media (orientation:landscape){div.video-player-container[_ngcontent-%COMP%]{flex-direction:row}}@media (orientation:portrait){div.video-player-container[_ngcontent-%COMP%]{flex-direction:column}}"]],data:{}});function j(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,4,"div",[["class","video-metadata-container"]],null,null,null,null,null)),e.Gb(512,null,i.y,i.z,[e.q,e.r,e.k,e.C]),e.pb(2,278528,null,0,i.j,[i.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),e.qb(3,0,null,null,1,"app-video-block",[],null,null,null,w,C)),e.pb(4,114688,null,0,A,[x,m.a],{context:[0,"context"]},null)],(function(n,l){n(l,2,0,"video-metadata-container",l.context.$implicit.className),n(l,4,0,l.context.$implicit)}),null)}function P(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,2,"div",[["class","video-player-container"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,j)),e.pb(2,278528,null,0,i.k,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,2,0,l.component.activeVideoBlocks)}),null)}function _(n){return e.Lb(0,[(n()(),e.qb(0,0,null,null,1,"app-video-player",[],null,null,null,P,M)),e.pb(1,114688,null,0,x,[m.a,O.b,q.a],null,null)],(function(n,l){n(l,1,0)}),null)}var N=e.mb("app-video-player",x,_,{},{},[]),z=t("NcP4"),F=t("POq0"),I=t("QQfA"),L=t("IP0z"),T=t("JjoW"),R=t("Mz6y"),V=t("Xd0L"),B=t("gavF"),J=t("/Co4"),D=t("s7LF"),E=t("/q54");class G{}var K=t("igqZ"),U=t("HsOI"),W=t("zMNK"),Z=t("hOhj"),H=t("5GAg"),Q=t("Fwaw"),S=t("oapL"),X=t("ZwOa"),Y=t("8P0U"),$=t("elxJ"),nn=t("rWV4"),ln=t("KPQW"),tn=t("mkRZ"),en=t("pBi1"),on=t("lT8R"),an=t("7of8"),cn=t("VDRc"),sn=t("ura0"),un=t("Nhcz"),bn=t("u9T3"),rn=t("Gcy5");t.d(l,"VideoPlayerModuleNgFactory",(function(){return dn}));var dn=e.nb(o,[],(function(n){return e.zb([e.Ab(512,e.j,e.Z,[[8,[a.a,N,z.a]],[3,e.j],e.v]),e.Ab(4608,i.n,i.m,[e.s,[2,i.D]]),e.Ab(4608,F.c,F.c,[]),e.Ab(4608,I.c,I.c,[I.i,I.e,e.j,I.h,I.f,e.p,e.x,i.d,L.b,[2,i.h]]),e.Ab(5120,I.j,I.k,[I.c]),e.Ab(5120,T.a,T.b,[I.c]),e.Ab(5120,R.b,R.c,[I.c]),e.Ab(4608,O.e,V.c,[[2,V.g],[2,V.l]]),e.Ab(4608,V.b,V.b,[]),e.Ab(5120,B.a,B.d,[I.c]),e.Ab(5120,J.b,J.c,[I.c]),e.Ab(4608,D.e,D.e,[]),e.Ab(4608,D.w,D.w,[]),e.Ab(5120,e.b,(function(n,l){return[E.j(n,l)]}),[i.d,e.z]),e.Ab(1073742336,i.c,i.c,[]),e.Ab(1073742336,q.s,q.s,[[2,q.x],[2,q.o]]),e.Ab(1073742336,G,G,[]),e.Ab(1073742336,L.a,L.a,[]),e.Ab(1073742336,V.l,V.l,[[2,V.d],[2,O.f]]),e.Ab(1073742336,d.b,d.b,[]),e.Ab(1073742336,g.c,g.c,[]),e.Ab(1073742336,K.c,K.c,[]),e.Ab(1073742336,F.d,F.d,[]),e.Ab(1073742336,U.e,U.e,[]),e.Ab(1073742336,W.e,W.e,[]),e.Ab(1073742336,u.b,u.b,[]),e.Ab(1073742336,Z.b,Z.b,[]),e.Ab(1073742336,I.g,I.g,[]),e.Ab(1073742336,V.v,V.v,[]),e.Ab(1073742336,V.t,V.t,[]),e.Ab(1073742336,V.q,V.q,[]),e.Ab(1073742336,T.d,T.d,[]),e.Ab(1073742336,H.a,H.a,[]),e.Ab(1073742336,R.e,R.e,[]),e.Ab(1073742336,Q.c,Q.c,[]),e.Ab(1073742336,S.c,S.c,[]),e.Ab(1073742336,X.b,X.b,[]),e.Ab(1073742336,Y.c,Y.c,[]),e.Ab(1073742336,s.c,s.c,[]),e.Ab(1073742336,$.d,$.d,[]),e.Ab(1073742336,nn.j,nn.j,[]),e.Ab(1073742336,ln.b,ln.b,[]),e.Ab(1073742336,B.c,B.c,[]),e.Ab(1073742336,B.b,B.b,[]),e.Ab(1073742336,J.e,J.e,[]),e.Ab(1073742336,tn.a,tn.a,[]),e.Ab(1073742336,en.d,en.d,[]),e.Ab(1073742336,en.c,en.c,[]),e.Ab(1073742336,on.a,on.a,[]),e.Ab(1073742336,an.a,an.a,[]),e.Ab(1073742336,D.v,D.v,[]),e.Ab(1073742336,D.s,D.s,[]),e.Ab(1073742336,E.c,E.c,[]),e.Ab(1073742336,cn.a,cn.a,[]),e.Ab(1073742336,sn.c,sn.c,[]),e.Ab(1073742336,un.a,un.a,[]),e.Ab(1073742336,bn.a,bn.a,[[2,E.g],e.z]),e.Ab(1073742336,rn.a,rn.a,[]),e.Ab(1073742336,o,o,[]),e.Ab(1024,q.m,(function(){return[[{path:"",component:x}]]}),[])])}))}}]);
//# sourceMappingURL=19-es2015.9704c19e06094dba4e92.js.map