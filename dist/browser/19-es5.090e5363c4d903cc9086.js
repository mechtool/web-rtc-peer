function _defineProperty(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function _toConsumableArray(n){return _arrayWithoutHoles(n)||_iterableToArray(n)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}function _arrayWithoutHoles(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var l=t[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{JSOT:function(n,t,e){"use strict";e.r(t);var l=e("8Y7J"),o=function n(){_classCallCheck(this,n)},i=e("pMnS"),a=e("SVse"),c=e("NvT6"),r=e("W5yJ"),s=e("/HVE"),u=e("omvX"),b=e("FbN9"),d=e("BzsH"),p=e("2/pp"),v=e("xQwi"),f=e("VYsW"),h=e("ZJFI"),m=e("Mr+X"),g=e("Gi4r"),k=function(){function n(t,e,l){_classCallCheck(this,n),this.videoPlayer=t,this.router=e,this.appContext=l,this.startBlock=!1,this.icons={video:["video-off","video"],audio:["audio-off","audio"]},this.video=this.icons.video[1],this.audio=this.icons.audio[1]}return _createClass(n,[{key:"ngOnInit",value:function(){this.context.className.active=!0}},{key:"startVisual",value:function(){var n=this;Object.keys(this.context.visual).sort((function(n,t){return+n-+t})).forEach((function(t){var e=setTimeout((function(){var l=n.context.visual[t];n.video=n.icons.video[l.video],n.audio=n.icons.audio[l.audio],n.appContext.appChangeRef.markForCheck(),clearTimeout(e)}),+t-n.context.startTime)}))}},{key:"onErrorVideo",value:function(n){}},{key:"onLoadedData",value:function(){this.startBlock=!0,this.context.visual&&this.startVisual(),this.appContext.appChangeRef.markForCheck()}},{key:"onEnded",value:function(){var n=this;this.startBlock=this.context.className.fixed=this.context.className.active=!1;var t=this.videoPlayer.activeVideoBlocks.value.filter((function(t){return t.uid!==n.context.uid}));t.length<2&&this.router.navigateByUrl("/application/main/messages"),this.videoPlayer.activeVideoBlocks.next(t),this.appContext.appChangeRef.markForCheck()}}]),n}(),C=e("2Vo4"),A=function(){function n(t,e,l,o,i){_classCallCheck(this,n),this.appContext=t,this.changeRef=e,this.sanitizer=l,this.router=o,this.route=i,this.dataLoaded=!1,this.stopActive=!1,this.activeVideoBlocks=new C.a([])}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;this.activeVideoBlocks.subscribe((function(n){n.forEach((function(t){t.local&&(t.className.fixed=n.length>1)}))})),this.route.data.subscribe((function(t){var e=Math.min.apply(Math,_toConsumableArray(Object.values(t.messageData.map((function(n){return n.mess.startTime})))));t.messageData.forEach((function(t){var l=setTimeout((function(){var e,o=n.activeVideoBlocks.value;o.push({startTime:t.mess.startTime,visual:t.mess.visual,src:n.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t.result)),uid:t.mess.uid,local:t.mess.local,contact:t.mess.local?n.appContext.activeMessage.sender:n.appContext.activeMessage.receivers.find((function(n){return n.uid===t.mess.uid})),className:(e={local:t.mess.local},_defineProperty(e,t.mess.uid,!0),_defineProperty(e,"false",!0),_defineProperty(e,"fixed",!1),e)}),n.activeVideoBlocks.next(o),clearTimeout(l),n.appContext.appChangeRef.markForCheck()}),t.mess.startTime-e)}))}))}},{key:"onClickOverlay",value:function(n){this.stopActive=!1,n.stopPropagation(),this.changeRef.detectChanges()}},{key:"onClickButton",value:function(){this.router.navigateByUrl("/application/main/messages")}},{key:"onClickHost",value:function(){var n=this;if(!this.stopActive){this.stopActive=!0;var t=setTimeout((function(){clearTimeout(t),n.stopActive=!1}),4e3)}}}]),n}(),y=e("iInd"),x=l.ob({encapsulation:0,styles:[["div.video-block-container.local.active.fixed[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:200px;height:200px;z-index:5}div.video-block-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;width:100%;height:100%;position:relative;transition:all .3s}.active-video-block[_ngcontent-%COMP%]{width:100%;height:100%}.video-block-toolbar[_ngcontent-%COMP%]{z-index:6;position:absolute;top:0;left:0;background:0 0;color:#fff}video.video-element[_ngcontent-%COMP%]{position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:50% 50%;object-position:50% 50%}.video-block-spinner[_ngcontent-%COMP%]{position:absolute}div.video-metadata-container.local.active.fixed[_nghost-%COMP%]     .contact-name, div.video-metadata-container.local.active.fixed   [_nghost-%COMP%]     .contact-name{display:none}"]],data:{}});function w(n){return l.Lb(0,[(n()(),l.qb(0,0,null,null,1,"mat-spinner",[["class","video-block-spinner mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,c.d,c.b)),l.pb(1,114688,null,0,r.d,[l.k,s.a,[2,a.d],[2,u.a],r.a],null,null)],(function(n,t){n(t,1,0)}),(function(n,t){n(t,0,0,l.Cb(t,1)._noopAnimations,l.Cb(t,1).diameter,l.Cb(t,1).diameter)}))}function _(n){return l.Lb(0,[(n()(),l.qb(0,0,null,null,11,"div",[["class","active-video-block"]],null,null,null,null,null)),(n()(),l.qb(1,0,null,null,9,"mat-toolbar",[["class","video-block-toolbar mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,b.b,b.a)),l.pb(2,4243456,null,1,d.a,[l.k,s.a,a.d],null,null),l.Hb(603979776,1,{_toolbarRows:1}),(n()(),l.qb(4,0,null,0,1,"app-contact",[],null,null,null,p.b,p.a)),l.pb(5,114688,null,0,v.a,[l.h,f.a,h.a,l.z],{context:[0,"context"]},null),(n()(),l.qb(6,0,null,0,0,"span",[["class","example-spacer"]],null,null,null,null,null)),(n()(),l.qb(7,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,m.b,m.a)),l.pb(8,9158656,null,0,g.b,[l.k,g.d,[8,null],[2,g.a],[2,l.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),l.qb(9,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,m.b,m.a)),l.pb(10,9158656,null,0,g.b,[l.k,g.d,[8,null],[2,g.a],[2,l.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),l.qb(11,0,null,null,0,"video",[["autoplay",""],["class","video-element"],["playsinline",""]],[[8,"src",4]],[[null,"loadeddata"],[null,"ended"],[null,"error"]],(function(n,t,e){var l=!0,o=n.component;return"loadeddata"===t&&(l=!1!==o.onLoadedData()&&l),"ended"===t&&(l=!1!==o.onEnded()&&l),"error"===t&&(l=!1!==o.onErrorVideo(e)&&l),l}),null,null))],(function(n,t){var e=t.component;n(t,5,0,e.context.contact),n(t,8,0,e.video),n(t,10,0,e.audio)}),(function(n,t){var e=t.component;n(t,1,0,l.Cb(t,2)._toolbarRows.length>0,0===l.Cb(t,2)._toolbarRows.length),n(t,7,0,l.Cb(t,8).inline,"primary"!==l.Cb(t,8).color&&"accent"!==l.Cb(t,8).color&&"warn"!==l.Cb(t,8).color),n(t,9,0,l.Cb(t,10).inline,"primary"!==l.Cb(t,10).color&&"accent"!==l.Cb(t,10).color&&"warn"!==l.Cb(t,10).color),n(t,11,0,e.context.src)}))}function P(n){return l.Lb(0,[(n()(),l.qb(0,0,null,null,6,"div",[["class","video-block-container"]],null,null,null,null,null)),l.Gb(512,null,a.y,a.z,[l.q,l.r,l.k,l.C]),l.pb(2,278528,null,0,a.j,[a.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),l.gb(16777216,null,null,1,null,w)),l.pb(4,16384,null,0,a.l,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,_)),l.pb(6,16384,null,0,a.l,[l.N,l.K],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,2,0,"video-block-container",e.context.className),n(t,4,0,!e.startBlock),n(t,6,0,e.context.className.active)}),null)}var O=e("cUpR"),j=l.ob({encapsulation:0,styles:[["div.video-player-container[_ngcontent-%COMP%]{display:flex;justify-content:stretch;align-items:stretch;width:100%;height:100%}div.video-player-stop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:flex;justify-content:center;align-items:center;z-index:6;height:100%;width:100%;background-color:#3e3e3e91}div.video-metadata-container.fixed[_ngcontent-%COMP%]{flex:initial}div.video-metadata-container[_ngcontent-%COMP%]{flex:1 1 0}div.stop-block-round[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:0;height:0;border-radius:50%;background-color:rgba(255,255,255,.45)}mat-icon.video-stop[_ngcontent-%COMP%]{width:48px;height:48px;top:0;color:#b00000}.stop-block-round[_ngcontent-%COMP%]{-webkit-animation:.2s forwards buttonEscalation;animation:.2s forwards buttonEscalation}@-webkit-keyframes buttonEscalation{from{width:10px;height:10px}to{width:80px;height:80px}}@keyframes buttonEscalation{from{width:10px;height:10px}to{width:80px;height:80px}}@media (orientation:landscape){div.video-player-container[_ngcontent-%COMP%]{flex-direction:row}}@media (orientation:portrait){div.video-player-container[_ngcontent-%COMP%]{flex-direction:column}}"]],data:{}});function M(n){return l.Lb(0,[(n()(),l.qb(0,0,null,null,4,"div",[["class","video-metadata-container"]],null,null,null,null,null)),l.Gb(512,null,a.y,a.z,[l.q,l.r,l.k,l.C]),l.pb(2,278528,null,0,a.j,[a.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),l.qb(3,0,null,null,1,"app-video-block",[],null,null,null,P,x)),l.pb(4,114688,null,0,k,[A,y.o,f.a],{context:[0,"context"]},null)],(function(n,t){n(t,2,0,"video-metadata-container",t.context.$implicit.className),n(t,4,0,t.context.$implicit)}),null)}function q(n){return l.Lb(0,[(n()(),l.qb(0,0,null,null,3,"div",[["class","video-player-stop"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onClickOverlay(e)&&l),l}),null,null)),(n()(),l.qb(1,0,null,null,2,"div",[["class","stop-block-round"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onClickButton()&&l),l}),null,null)),(n()(),l.qb(2,0,null,null,1,"mat-icon",[["class","video-stop mat-icon notranslate"],["role","img"],["svgIcon","video-stop"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,m.b,m.a)),l.pb(3,9158656,null,0,g.b,[l.k,g.d,[8,null],[2,g.a],[2,l.l]],{svgIcon:[0,"svgIcon"]},null)],(function(n,t){n(t,3,0,"video-stop")}),(function(n,t){n(t,2,0,l.Cb(t,3).inline,"primary"!==l.Cb(t,3).color&&"accent"!==l.Cb(t,3).color&&"warn"!==l.Cb(t,3).color)}))}function I(n){return l.Lb(0,[(n()(),l.qb(0,0,null,null,3,"div",[["class","video-player-container"]],null,null,null,null,null)),(n()(),l.gb(16777216,null,null,2,null,M)),l.pb(2,278528,null,0,a.k,[l.N,l.K,l.q],{ngForOf:[0,"ngForOf"]},null),l.Db(131072,a.b,[l.h]),(n()(),l.gb(16777216,null,null,1,null,q)),l.pb(5,16384,null,0,a.l,[l.N,l.K],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,2,0,l.Kb(t,2,0,l.Cb(t,3).transform(e.activeVideoBlocks))),n(t,5,0,e.stopActive)}),null)}var T=l.mb("app-video-player",A,(function(n){return l.Lb(0,[(n()(),l.qb(0,0,null,null,1,"app-video-player",[],null,[[null,"click"]],(function(n,t,e){var o=!0;return"click"===t&&(o=!1!==l.Cb(n,1).onClickHost()&&o),o}),I,j)),l.pb(1,114688,null,0,A,[f.a,l.h,O.b,y.o,y.a],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),N=e("NcP4"),V=e("POq0"),z=e("QQfA"),B=e("IP0z"),L=e("JjoW"),R=e("Mz6y"),E=e("Xd0L"),F=e("gavF"),H=e("/Co4"),J=e("s7LF"),S=e("/q54"),D=function n(){_classCallCheck(this,n)},K=e("igqZ"),U=e("HsOI"),W=e("zMNK"),G=e("hOhj"),Z=e("5GAg"),Q=e("Fwaw"),X=e("oapL"),Y=e("ZwOa"),$=e("8P0U"),nn=e("elxJ"),tn=e("rWV4"),en=e("KPQW"),ln=e("mkRZ"),on=e("pBi1"),an=e("lT8R"),cn=e("7of8"),rn=e("VDRc"),sn=e("ura0"),un=e("Nhcz"),bn=e("u9T3"),dn=e("Gcy5");e.d(t,"VideoPlayerModuleNgFactory",(function(){return pn}));var pn=l.nb(o,[],(function(n){return l.zb([l.Ab(512,l.j,l.Z,[[8,[i.a,T,N.a]],[3,l.j],l.v]),l.Ab(4608,a.n,a.m,[l.s,[2,a.D]]),l.Ab(4608,V.c,V.c,[]),l.Ab(4608,z.c,z.c,[z.i,z.e,l.j,z.h,z.f,l.p,l.x,a.d,B.b,[2,a.h]]),l.Ab(5120,z.j,z.k,[z.c]),l.Ab(5120,L.a,L.b,[z.c]),l.Ab(5120,R.b,R.c,[z.c]),l.Ab(4608,O.e,E.c,[[2,E.g],[2,E.l]]),l.Ab(4608,E.b,E.b,[]),l.Ab(5120,F.a,F.d,[z.c]),l.Ab(5120,H.b,H.c,[z.c]),l.Ab(4608,J.e,J.e,[]),l.Ab(4608,J.w,J.w,[]),l.Ab(5120,l.b,(function(n,t){return[S.j(n,t)]}),[a.d,l.z]),l.Ab(1073742336,a.c,a.c,[]),l.Ab(1073742336,y.s,y.s,[[2,y.x],[2,y.o]]),l.Ab(1073742336,D,D,[]),l.Ab(1073742336,B.a,B.a,[]),l.Ab(1073742336,E.l,E.l,[[2,E.d],[2,O.f]]),l.Ab(1073742336,d.b,d.b,[]),l.Ab(1073742336,g.c,g.c,[]),l.Ab(1073742336,K.c,K.c,[]),l.Ab(1073742336,V.d,V.d,[]),l.Ab(1073742336,U.e,U.e,[]),l.Ab(1073742336,W.e,W.e,[]),l.Ab(1073742336,s.b,s.b,[]),l.Ab(1073742336,G.b,G.b,[]),l.Ab(1073742336,z.g,z.g,[]),l.Ab(1073742336,E.v,E.v,[]),l.Ab(1073742336,E.t,E.t,[]),l.Ab(1073742336,E.q,E.q,[]),l.Ab(1073742336,L.d,L.d,[]),l.Ab(1073742336,Z.a,Z.a,[]),l.Ab(1073742336,R.e,R.e,[]),l.Ab(1073742336,Q.c,Q.c,[]),l.Ab(1073742336,X.c,X.c,[]),l.Ab(1073742336,Y.b,Y.b,[]),l.Ab(1073742336,$.c,$.c,[]),l.Ab(1073742336,r.c,r.c,[]),l.Ab(1073742336,nn.d,nn.d,[]),l.Ab(1073742336,tn.j,tn.j,[]),l.Ab(1073742336,en.b,en.b,[]),l.Ab(1073742336,F.c,F.c,[]),l.Ab(1073742336,F.b,F.b,[]),l.Ab(1073742336,H.e,H.e,[]),l.Ab(1073742336,ln.a,ln.a,[]),l.Ab(1073742336,on.d,on.d,[]),l.Ab(1073742336,on.c,on.c,[]),l.Ab(1073742336,an.a,an.a,[]),l.Ab(1073742336,cn.a,cn.a,[]),l.Ab(1073742336,J.v,J.v,[]),l.Ab(1073742336,J.s,J.s,[]),l.Ab(1073742336,S.c,S.c,[]),l.Ab(1073742336,rn.a,rn.a,[]),l.Ab(1073742336,sn.c,sn.c,[]),l.Ab(1073742336,un.a,un.a,[]),l.Ab(1073742336,bn.a,bn.a,[[2,S.g],l.z]),l.Ab(1073742336,dn.a,dn.a,[]),l.Ab(1073742336,o,o,[]),l.Ab(1024,y.m,(function(){return[[{path:"",component:A}]]}),[])])}))}}]);
//# sourceMappingURL=19-es5.090e5363c4d903cc9086.js.map