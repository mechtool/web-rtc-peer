(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ICdQ:function(n,t,l){"use strict";l.r(t);var a=l("8Y7J");class o{}var c=l("pMnS"),e=l("9Rn4"),s=l("YzQ4"),b=l("VYsW"),i=l("FbN9"),u=l("BzsH"),r=l("/HVE"),p=l("SVse"),d=l("bujt"),h=l("Mz6y"),m=l("QQfA"),C=l("hOhj"),g=l("5GAg"),A=l("IP0z"),v=l("cUpR"),f=l("Fwaw"),x=l("omvX"),w=l("Mr+X"),_=l("Gi4r"),y=l("lzlj"),k=l("igqZ"),O=l("cu63"),q=l("Rf8I"),M=l("V+Fh"),I=l("mrSG");class j{constructor(n,t,l,a,o){this.appContext=n,this.database=t,this.colorThemeService=l,this.router=a,this.platformId=o,this.subscribers=[],this.search=!1,this.contactsHeader="\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",this.activateEdit=!0,this.buttons=[]}ngOnInit(){Object(p.v)(this.platformId)&&(this.buttons=["search_contact","remove_contact"],this.contactRestriction=window.localStorage.getItem("contactRestriction"),this.subscribers.push(this.appContext.contacts.subscribe(n=>{this.contactsLength=n.length})),this.subscribers.push(this.appContext.appUsers.subscribe(n=>{this.appUsers=n})))}onActivatedContact(n){n.add?this.appContext.activeContacts[n.contact.uid]=n.contact:delete this.appContext.activeContacts[n.contact.uid],this.activateEdit=!Object.keys(this.appContext.activeContacts).length}onOptionSelected(n){this.database.setContacts({contactURL:"/contacts/"+this.appContext.user.value.uid,value:{[n.uid]:n}}).then(n=>{}).catch(n=>{})}onDeleteContacts(){return I.__awaiter(this,void 0,void 0,(function*(){for(let n in this.appContext.activeContacts)yield this.database.setContacts({contactURL:"/contacts/"+this.appContext.user.value.uid,value:{[n]:null}}).then(()=>console.log("\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u0443\u0434\u0430\u043b\u0435\u043d\u044b."));this.appContext.activeContacts={},this.activateEdit=!0}))}triggerSearch(){this.search=!this.search}ngOnDestroy(){this.subscribers.forEach(n=>n.unsubscribe())}}var P=l("ZJFI"),z=l("iInd"),R=a.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:stretch;height:100%}.contacts-not[_ngcontent-%COMP%]{color:#bebebe}.contacts-header[_ngcontent-%COMP%]{font-size:18px!important}.added-contacts-container[_ngcontent-%COMP%]{margin-top:16px}mat-card.contacts-container[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;overflow-y:auto!important;flex:1 1 0!important}button.toolbar-button.active[_ngcontent-%COMP%]{background:rgba(255,255,255,.15)}mat-icon[_ngcontent-%COMP%]{position:relative;top:-2px}.element-control-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}div.contacts-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:stretch;height:100%}.contact-table-container[_ngcontent-%COMP%]{flex:1 1 0}@media (max-width:400px){.contacts-search-header[_ngcontent-%COMP%]{display:none}}"]],data:{}});function N(n){return a.Lb(0,[(n()(),a.qb(0,0,null,null,1,"span",[["class","contacts-header contacts-search-header"]],null,null,null,null,null)),(n()(),a.Jb(-1,null,[" : \u043f\u043e\u0438\u0441\u043a \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430"]))],null,null)}function L(n){return a.Lb(0,[(n()(),a.qb(0,0,null,null,1,"app-contact-search",[],null,[[null,"selectedOption"]],(function(n,t,l){var a=!0;return"selectedOption"===t&&(a=!1!==n.component.onOptionSelected(l)&&a),a}),e.b,e.a)),a.pb(1,114688,null,0,s.a,[b.a,a.h],{collection:[0,"collection"],baseCollection:[1,"baseCollection"]},{selectedOption:"selectedOption"})],(function(n,t){var l=t.component;n(t,1,0,l.appContext.contacts,l.appContext.appUsers)}),null)}function J(n){return a.Lb(0,[(n()(),a.qb(0,0,null,null,20,"mat-toolbar",[["class","mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,i.b,i.a)),a.pb(1,4243456,null,1,u.a,[a.k,r.a,p.d],{color:[0,"color"]},null),a.Hb(603979776,1,{_toolbarRows:1}),(n()(),a.qb(3,0,null,0,1,"span",[["class","contacts-header"]],null,null,null,null,null)),(n()(),a.Jb(4,null,["",""])),(n()(),a.gb(16777216,null,0,1,null,N)),a.pb(6,16384,null,0,p.l,[a.N,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a.qb(7,0,null,0,0,"span",[["class","example-spacer"]],null,null,null,null,null)),(n()(),a.qb(8,16777216,null,0,7,"button",[["class","toolbar-button search-trigger"],["mat-icon-button",""],["matTooltip","\u041f\u043e\u0438\u0441\u043a"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,t,l){var o=!0,c=n.component;return"longpress"===t&&(o=!1!==a.Cb(n,12).show()&&o),"keydown"===t&&(o=!1!==a.Cb(n,12)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==a.Cb(n,12)._handleTouchend()&&o),"click"===t&&(o=!1!==c.triggerSearch()&&o),o}),d.b,d.a)),a.Gb(512,null,p.y,p.z,[a.q,a.r,a.k,a.C]),a.pb(10,278528,null,0,p.j,[p.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Eb(11,{active:0}),a.pb(12,212992,null,0,h.d,[m.c,a.k,C.a,a.N,a.x,r.a,g.c,g.f,h.b,[2,A.b],[2,h.a],[2,v.f]],{message:[0,"message"]},null),a.pb(13,180224,null,0,f.b,[a.k,g.f,[2,x.a]],null,null),(n()(),a.qb(14,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,w.b,w.a)),a.pb(15,9158656,null,0,_.b,[a.k,_.d,[8,null],[2,_.a],[2,a.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),a.qb(16,16777216,null,0,4,"button",[["class","toolbar-button delete-contact"],["mat-icon-button",""],["matTooltip","\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,t,l){var o=!0,c=n.component;return"longpress"===t&&(o=!1!==a.Cb(n,17).show()&&o),"keydown"===t&&(o=!1!==a.Cb(n,17)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==a.Cb(n,17)._handleTouchend()&&o),"click"===t&&(o=!1!==c.onDeleteContacts()&&o),o}),d.b,d.a)),a.pb(17,212992,null,0,h.d,[m.c,a.k,C.a,a.N,a.x,r.a,g.c,g.f,h.b,[2,A.b],[2,h.a],[2,v.f]],{message:[0,"message"]},null),a.pb(18,180224,null,0,f.b,[a.k,g.f,[2,x.a]],{disabled:[0,"disabled"]},null),(n()(),a.qb(19,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,w.b,w.a)),a.pb(20,9158656,null,0,_.b,[a.k,_.d,[8,null],[2,_.a],[2,a.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),a.qb(21,0,null,null,8,"mat-card",[["class","contacts-container mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,y.b,y.a)),a.pb(22,49152,null,0,k.a,[[2,x.a]],null,null),(n()(),a.qb(23,0,null,0,6,"div",[["class","contacts-block"]],null,null,null,null,null)),(n()(),a.qb(24,0,null,null,2,"div",[["class","element-control-container"]],null,null,null,null,null)),(n()(),a.gb(16777216,null,null,1,null,L)),a.pb(26,16384,null,0,p.l,[a.N,a.K],{ngIf:[0,"ngIf"]},null),(n()(),a.qb(27,0,null,null,2,"div",[["class","contact-table-container"]],null,null,null,null,null)),(n()(),a.qb(28,0,null,null,1,"app-contact-table",[["class","inner-contact-table"]],null,[[null,"activatedContact"]],(function(n,t,l){var a=!0;return"activatedContact"===t&&(a=!1!==n.component.onActivatedContact(l)&&a),a}),O.b,O.a)),a.pb(29,49152,null,0,q.a,[b.a,M.a],{context:[0,"context"]},{activatedContact:"activatedContact"})],(function(n,t){var l=t.component;n(t,1,0,"primary"),n(t,6,0,l.search);var a=n(t,11,0,l.search);n(t,10,0,"toolbar-button search-trigger",a),n(t,12,0,"\u041f\u043e\u0438\u0441\u043a"),n(t,15,0,l.buttons[0]),n(t,17,0,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),n(t,18,0,l.activateEdit),n(t,20,0,l.buttons[1]),n(t,26,0,l.search),n(t,29,0,l.appContext.contacts)}),(function(n,t){var l=t.component;n(t,0,0,a.Cb(t,1)._toolbarRows.length>0,0===a.Cb(t,1)._toolbarRows.length),n(t,4,0,l.contactsHeader),n(t,8,0,a.Cb(t,13).disabled||null,"NoopAnimations"===a.Cb(t,13)._animationMode),n(t,14,0,a.Cb(t,15).inline,"primary"!==a.Cb(t,15).color&&"accent"!==a.Cb(t,15).color&&"warn"!==a.Cb(t,15).color),n(t,16,0,a.Cb(t,18).disabled||null,"NoopAnimations"===a.Cb(t,18)._animationMode),n(t,19,0,a.Cb(t,20).inline,"primary"!==a.Cb(t,20).color&&"accent"!==a.Cb(t,20).color&&"warn"!==a.Cb(t,20).color),n(t,21,0,"NoopAnimations"===a.Cb(t,22)._animationMode)}))}function S(n){return a.Lb(0,[(n()(),a.qb(0,0,null,null,1,"app-contacts",[],null,null,null,J,R)),a.pb(1,245760,null,0,j,[b.a,P.a,M.a,z.o,a.z],null,null)],(function(n,t){n(t,1,0)}),null)}var E=a.mb("app-contacts",j,S,{},{},[]),F=l("NcP4"),T=l("POq0"),U=l("JjoW"),H=l("Xd0L"),K=l("gavF"),V=l("/Co4"),D=l("s7LF"),G=l("/q54");class Q{}var W=l("HsOI"),Z=l("zMNK"),X=l("oapL"),Y=l("ZwOa"),B=l("8P0U"),$=l("W5yJ"),nn=l("elxJ"),tn=l("rWV4"),ln=l("KPQW"),an=l("mkRZ"),on=l("pBi1"),cn=l("lT8R"),en=l("7of8"),sn=l("VDRc"),bn=l("ura0"),un=l("Nhcz"),rn=l("u9T3"),pn=l("Gcy5");l.d(t,"ContactsModuleNgFactory",(function(){return dn}));var dn=a.nb(o,[],(function(n){return a.zb([a.Ab(512,a.j,a.Z,[[8,[c.a,E,F.a]],[3,a.j],a.v]),a.Ab(4608,p.n,p.m,[a.s,[2,p.D]]),a.Ab(4608,T.c,T.c,[]),a.Ab(4608,m.c,m.c,[m.i,m.e,a.j,m.h,m.f,a.p,a.x,p.d,A.b,[2,p.h]]),a.Ab(5120,m.j,m.k,[m.c]),a.Ab(5120,U.a,U.b,[m.c]),a.Ab(5120,h.b,h.c,[m.c]),a.Ab(4608,v.e,H.c,[[2,H.g],[2,H.l]]),a.Ab(4608,H.b,H.b,[]),a.Ab(5120,K.a,K.d,[m.c]),a.Ab(5120,V.b,V.c,[m.c]),a.Ab(4608,D.e,D.e,[]),a.Ab(4608,D.w,D.w,[]),a.Ab(5120,a.b,(function(n,t){return[G.j(n,t)]}),[p.d,a.z]),a.Ab(1073742336,p.c,p.c,[]),a.Ab(1073742336,z.s,z.s,[[2,z.x],[2,z.o]]),a.Ab(1073742336,Q,Q,[]),a.Ab(1073742336,A.a,A.a,[]),a.Ab(1073742336,H.l,H.l,[[2,H.d],[2,v.f]]),a.Ab(1073742336,u.b,u.b,[]),a.Ab(1073742336,_.c,_.c,[]),a.Ab(1073742336,k.c,k.c,[]),a.Ab(1073742336,T.d,T.d,[]),a.Ab(1073742336,W.e,W.e,[]),a.Ab(1073742336,Z.e,Z.e,[]),a.Ab(1073742336,r.b,r.b,[]),a.Ab(1073742336,C.b,C.b,[]),a.Ab(1073742336,m.g,m.g,[]),a.Ab(1073742336,H.v,H.v,[]),a.Ab(1073742336,H.t,H.t,[]),a.Ab(1073742336,H.q,H.q,[]),a.Ab(1073742336,U.d,U.d,[]),a.Ab(1073742336,g.a,g.a,[]),a.Ab(1073742336,h.e,h.e,[]),a.Ab(1073742336,f.c,f.c,[]),a.Ab(1073742336,X.c,X.c,[]),a.Ab(1073742336,Y.b,Y.b,[]),a.Ab(1073742336,B.c,B.c,[]),a.Ab(1073742336,$.c,$.c,[]),a.Ab(1073742336,nn.d,nn.d,[]),a.Ab(1073742336,tn.j,tn.j,[]),a.Ab(1073742336,ln.b,ln.b,[]),a.Ab(1073742336,K.c,K.c,[]),a.Ab(1073742336,K.b,K.b,[]),a.Ab(1073742336,V.e,V.e,[]),a.Ab(1073742336,an.a,an.a,[]),a.Ab(1073742336,on.d,on.d,[]),a.Ab(1073742336,on.c,on.c,[]),a.Ab(1073742336,cn.a,cn.a,[]),a.Ab(1073742336,en.a,en.a,[]),a.Ab(1073742336,D.v,D.v,[]),a.Ab(1073742336,D.s,D.s,[]),a.Ab(1073742336,G.c,G.c,[]),a.Ab(1073742336,sn.a,sn.a,[]),a.Ab(1073742336,bn.c,bn.c,[]),a.Ab(1073742336,un.a,un.a,[]),a.Ab(1073742336,rn.a,rn.a,[[2,G.g],a.z]),a.Ab(1073742336,pn.a,pn.a,[]),a.Ab(1073742336,o,o,[]),a.Ab(1024,z.m,(function(){return[[{path:"",component:j}]]}),[])])}))}}]);
//# sourceMappingURL=13-es2015.6cdd9561bebacf952eb1.js.map