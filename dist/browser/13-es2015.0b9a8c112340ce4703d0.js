(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ICdQ:function(n,t,l){"use strict";l.r(t);var a=l("8Y7J");class o{}var c=l("pMnS"),e=l("9Rn4"),s=l("YzQ4"),b=l("VYsW"),i=l("FbN9"),u=l("BzsH"),r=l("/HVE"),d=l("SVse"),p=l("bujt"),C=l("Mz6y"),h=l("QQfA"),m=l("hOhj"),g=l("5GAg"),v=l("IP0z"),f=l("cUpR"),x=l("Fwaw"),w=l("omvX"),O=l("Mr+X"),y=l("Gi4r"),_=l("lzlj"),k=l("igqZ"),E=l("cu63"),I=l("Rf8I"),M=l("V+Fh"),j=l("mrSG");class P{constructor(n,t,l,a,o){this.appContext=n,this.database=t,this.colorThemeService=l,this.router=a,this.platformId=o,this.subscribers=[],this.search=!1,this.contactsHeader="\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",this.activateEdit=!0,this.buttons=[]}ngOnInit(){Object(d.v)(this.platformId)&&(this.buttons=["search_contact","remove_contact"],this.contactRestriction=window.localStorage.getItem("contactRestriction"),this.subscribers.push(this.appContext.contacts.subscribe(n=>{this.contactsLength=n.length})),this.subscribers.push(this.appContext.appUsers.subscribe(n=>{this.appUsers=n})))}onActivatedContact(n){n.add?"0"==this.contactRestriction&&Object.keys(this.appContext.activeContacts).length<1||"1"==this.contactRestriction?this.appContext.activeContacts[n.contact.uid]=n.contact:console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442. \u041f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432."):delete this.appContext.activeContacts[n.contact.uid],this.activateEdit=!Object.keys(this.appContext.activeContacts).length}onOptionSelected(n){this.database.setContacts({contactURL:"/contacts/"+this.appContext.user.value.uid,value:{[n.uid]:n}}).then(n=>{}).catch(n=>{})}onDeleteContacts(){return j.__awaiter(this,void 0,void 0,(function*(){for(let n in this.appContext.activeContacts)yield this.database.setContacts({contactURL:"/contacts/"+this.appContext.user.value.uid,value:{[n]:null}}).then(()=>console.log("\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u0443\u0434\u0430\u043b\u0435\u043d\u044b."));this.appContext.activeContacts={},this.activateEdit=!0}))}triggerSearch(){this.search=!this.search}ngOnDestroy(){this.subscribers.forEach(n=>n.unsubscribe())}}var R=l("ZJFI"),z=l("iInd"),N=a.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:stretch;height:100%}.contacts-not[_ngcontent-%COMP%]{color:#bebebe}.contacts-header[_ngcontent-%COMP%]{font-size:18px!important}.added-contacts-container[_ngcontent-%COMP%]{margin-top:16px}mat-card.contacts-container[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;overflow-y:auto!important;flex:1 1 0!important}button.toolbar-button.active[_ngcontent-%COMP%]{background:rgba(255,255,255,.15)}mat-icon[_ngcontent-%COMP%]{position:relative;top:-2px}.element-control-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}div.contacts-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:stretch;height:100%}.contact-table-container[_ngcontent-%COMP%]{flex:1 1 0}@media (max-width:400px){.contacts-search-header[_ngcontent-%COMP%]{display:none}}"]],data:{}});function L(n){return a.Nb(0,[(n()(),a.sb(0,0,null,null,1,"span",[["class","contacts-header contacts-search-header"]],null,null,null,null,null)),(n()(),a.Lb(-1,null,[" : \u043f\u043e\u0438\u0441\u043a \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430"]))],null,null)}function S(n){return a.Nb(0,[(n()(),a.sb(0,0,null,null,1,"app-contact-search",[],null,[[null,"selectedOption"]],(function(n,t,l){var a=!0;return"selectedOption"===t&&(a=!1!==n.component.onOptionSelected(l)&&a),a}),e.b,e.a)),a.rb(1,114688,null,0,s.a,[b.a,a.h],{collection:[0,"collection"],baseCollection:[1,"baseCollection"]},{selectedOption:"selectedOption"})],(function(n,t){var l=t.component;n(t,1,0,l.appContext.contacts,l.appContext.appUsers)}),null)}function J(n){return a.Nb(0,[(n()(),a.sb(0,0,null,null,20,"mat-toolbar",[["class","mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,i.b,i.a)),a.rb(1,4243456,null,1,u.a,[a.k,r.a,d.d],{color:[0,"color"]},null),a.Jb(603979776,1,{_toolbarRows:1}),(n()(),a.sb(3,0,null,0,1,"span",[["class","contacts-header"]],null,null,null,null,null)),(n()(),a.Lb(4,null,["",""])),(n()(),a.ib(16777216,null,0,1,null,L)),a.rb(6,16384,null,0,d.l,[a.O,a.L],{ngIf:[0,"ngIf"]},null),(n()(),a.sb(7,0,null,0,0,"span",[["class","example-spacer"]],null,null,null,null,null)),(n()(),a.sb(8,16777216,null,0,7,"button",[["class","toolbar-button search-trigger"],["mat-icon-button",""],["matTooltip","\u041f\u043e\u0438\u0441\u043a"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,t,l){var o=!0,c=n.component;return"longpress"===t&&(o=!1!==a.Eb(n,12).show()&&o),"keydown"===t&&(o=!1!==a.Eb(n,12)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==a.Eb(n,12)._handleTouchend()&&o),"click"===t&&(o=!1!==c.triggerSearch()&&o),o}),p.b,p.a)),a.Ib(512,null,d.y,d.z,[a.q,a.r,a.k,a.D]),a.rb(10,278528,null,0,d.j,[d.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Gb(11,{active:0}),a.rb(12,212992,null,0,C.d,[h.c,a.k,m.a,a.O,a.x,r.a,g.c,g.f,C.b,[2,v.b],[2,C.a],[2,f.f]],{message:[0,"message"]},null),a.rb(13,180224,null,0,x.b,[a.k,g.f,[2,w.a]],null,null),(n()(),a.sb(14,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,O.b,O.a)),a.rb(15,9158656,null,0,y.b,[a.k,y.d,[8,null],[2,y.a],[2,a.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),a.sb(16,16777216,null,0,4,"button",[["class","toolbar-button delete-contact"],["mat-icon-button",""],["matTooltip","\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,t,l){var o=!0,c=n.component;return"longpress"===t&&(o=!1!==a.Eb(n,17).show()&&o),"keydown"===t&&(o=!1!==a.Eb(n,17)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==a.Eb(n,17)._handleTouchend()&&o),"click"===t&&(o=!1!==c.onDeleteContacts()&&o),o}),p.b,p.a)),a.rb(17,212992,null,0,C.d,[h.c,a.k,m.a,a.O,a.x,r.a,g.c,g.f,C.b,[2,v.b],[2,C.a],[2,f.f]],{message:[0,"message"]},null),a.rb(18,180224,null,0,x.b,[a.k,g.f,[2,w.a]],{disabled:[0,"disabled"]},null),(n()(),a.sb(19,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,O.b,O.a)),a.rb(20,9158656,null,0,y.b,[a.k,y.d,[8,null],[2,y.a],[2,a.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),a.sb(21,0,null,null,8,"mat-card",[["class","contacts-container mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,_.b,_.a)),a.rb(22,49152,null,0,k.a,[[2,w.a]],null,null),(n()(),a.sb(23,0,null,0,6,"div",[["class","contacts-block"]],null,null,null,null,null)),(n()(),a.sb(24,0,null,null,2,"div",[["class","element-control-container"]],null,null,null,null,null)),(n()(),a.ib(16777216,null,null,1,null,S)),a.rb(26,16384,null,0,d.l,[a.O,a.L],{ngIf:[0,"ngIf"]},null),(n()(),a.sb(27,0,null,null,2,"div",[["class","contact-table-container"]],null,null,null,null,null)),(n()(),a.sb(28,0,null,null,1,"app-contact-table",[["class","inner-contact-table"]],null,[[null,"activatedContact"]],(function(n,t,l){var a=!0;return"activatedContact"===t&&(a=!1!==n.component.onActivatedContact(l)&&a),a}),E.b,E.a)),a.rb(29,114688,null,0,I.a,[M.a],{context:[0,"context"]},{activatedContact:"activatedContact"})],(function(n,t){var l=t.component;n(t,1,0,"primary"),n(t,6,0,l.search);var a=n(t,11,0,l.search);n(t,10,0,"toolbar-button search-trigger",a),n(t,12,0,"\u041f\u043e\u0438\u0441\u043a"),n(t,15,0,l.buttons[0]),n(t,17,0,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),n(t,18,0,l.activateEdit),n(t,20,0,l.buttons[1]),n(t,26,0,l.search),n(t,29,0,l.appContext.contacts)}),(function(n,t){var l=t.component;n(t,0,0,a.Eb(t,1)._toolbarRows.length>0,0===a.Eb(t,1)._toolbarRows.length),n(t,4,0,l.contactsHeader),n(t,8,0,a.Eb(t,13).disabled||null,"NoopAnimations"===a.Eb(t,13)._animationMode),n(t,14,0,a.Eb(t,15).inline,"primary"!==a.Eb(t,15).color&&"accent"!==a.Eb(t,15).color&&"warn"!==a.Eb(t,15).color),n(t,16,0,a.Eb(t,18).disabled||null,"NoopAnimations"===a.Eb(t,18)._animationMode),n(t,19,0,a.Eb(t,20).inline,"primary"!==a.Eb(t,20).color&&"accent"!==a.Eb(t,20).color&&"warn"!==a.Eb(t,20).color),n(t,21,0,"NoopAnimations"===a.Eb(t,22)._animationMode)}))}function q(n){return a.Nb(0,[(n()(),a.sb(0,0,null,null,1,"app-contacts",[],null,null,null,J,N)),a.rb(1,245760,null,0,P,[b.a,R.a,M.a,z.o,a.z],null,null)],(function(n,t){n(t,1,0)}),null)}var A=a.ob("app-contacts",P,q,{},{},[]),F=l("NcP4"),T=l("POq0"),U=l("JjoW"),D=l("Xd0L"),V=l("gavF"),G=l("/Co4"),H=l("s7LF"),Q=l("/q54");class W{}var K=l("HsOI"),Z=l("zMNK"),B=l("oapL"),X=l("ZwOa"),Y=l("8P0U"),$=l("W5yJ"),nn=l("elxJ"),tn=l("rWV4"),ln=l("KPQW"),an=l("mkRZ"),on=l("pBi1"),cn=l("lT8R"),en=l("7of8"),sn=l("VDRc"),bn=l("ura0"),un=l("Nhcz"),rn=l("u9T3"),dn=l("Gcy5");l.d(t,"ContactsModuleNgFactory",(function(){return pn}));var pn=a.pb(o,[],(function(n){return a.Bb([a.Cb(512,a.j,a.bb,[[8,[c.a,A,F.a]],[3,a.j],a.v]),a.Cb(4608,d.n,d.m,[a.s,[2,d.D]]),a.Cb(4608,T.c,T.c,[]),a.Cb(4608,h.c,h.c,[h.i,h.e,a.j,h.h,h.f,a.p,a.x,d.d,v.b,[2,d.h]]),a.Cb(5120,h.j,h.k,[h.c]),a.Cb(5120,U.a,U.b,[h.c]),a.Cb(5120,C.b,C.c,[h.c]),a.Cb(4608,f.e,D.c,[[2,D.g],[2,D.l]]),a.Cb(4608,D.b,D.b,[]),a.Cb(5120,V.a,V.d,[h.c]),a.Cb(5120,G.b,G.c,[h.c]),a.Cb(4608,H.e,H.e,[]),a.Cb(4608,H.w,H.w,[]),a.Cb(5120,a.b,(function(n,t){return[Q.j(n,t)]}),[d.d,a.z]),a.Cb(1073742336,d.c,d.c,[]),a.Cb(1073742336,z.s,z.s,[[2,z.x],[2,z.o]]),a.Cb(1073742336,W,W,[]),a.Cb(1073742336,v.a,v.a,[]),a.Cb(1073742336,D.l,D.l,[[2,D.d],[2,f.f]]),a.Cb(1073742336,u.b,u.b,[]),a.Cb(1073742336,y.c,y.c,[]),a.Cb(1073742336,k.c,k.c,[]),a.Cb(1073742336,T.d,T.d,[]),a.Cb(1073742336,K.e,K.e,[]),a.Cb(1073742336,Z.e,Z.e,[]),a.Cb(1073742336,r.b,r.b,[]),a.Cb(1073742336,m.b,m.b,[]),a.Cb(1073742336,h.g,h.g,[]),a.Cb(1073742336,D.v,D.v,[]),a.Cb(1073742336,D.t,D.t,[]),a.Cb(1073742336,D.q,D.q,[]),a.Cb(1073742336,U.d,U.d,[]),a.Cb(1073742336,g.a,g.a,[]),a.Cb(1073742336,C.e,C.e,[]),a.Cb(1073742336,x.c,x.c,[]),a.Cb(1073742336,B.c,B.c,[]),a.Cb(1073742336,X.b,X.b,[]),a.Cb(1073742336,Y.c,Y.c,[]),a.Cb(1073742336,$.c,$.c,[]),a.Cb(1073742336,nn.d,nn.d,[]),a.Cb(1073742336,tn.j,tn.j,[]),a.Cb(1073742336,ln.b,ln.b,[]),a.Cb(1073742336,V.c,V.c,[]),a.Cb(1073742336,V.b,V.b,[]),a.Cb(1073742336,G.e,G.e,[]),a.Cb(1073742336,an.a,an.a,[]),a.Cb(1073742336,on.d,on.d,[]),a.Cb(1073742336,on.c,on.c,[]),a.Cb(1073742336,cn.a,cn.a,[]),a.Cb(1073742336,en.a,en.a,[]),a.Cb(1073742336,H.v,H.v,[]),a.Cb(1073742336,H.s,H.s,[]),a.Cb(1073742336,Q.c,Q.c,[]),a.Cb(1073742336,sn.a,sn.a,[]),a.Cb(1073742336,bn.c,bn.c,[]),a.Cb(1073742336,un.a,un.a,[]),a.Cb(1073742336,rn.a,rn.a,[[2,Q.g],a.z]),a.Cb(1073742336,dn.a,dn.a,[]),a.Cb(1073742336,o,o,[]),a.Cb(1024,z.m,(function(){return[[{path:"",component:P}]]}),[])])}))}}]);
//# sourceMappingURL=13-es2015.0b9a8c112340ce4703d0.js.map