(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{JSOT:function(n,l,t){"use strict";t.r(l);var o=t("8Y7J");class e{}var a=t("pMnS"),i=t("SVse"),c=t("FbN9"),s=t("BzsH"),u=t("/HVE"),b=t("2/pp"),d=t("xQwi"),r=t("VYsW"),p=t("ZJFI"),v=t("Mr+X"),h=t("Gi4r");class m{constructor(n,l){this.videoPlayer=n,this.appContext=l,this.icons={video:["video-off","video"],audio:["audio-off","audio"]},this.video=this.icons.video[1],this.audio=this.icons.audio[1]}startVisual(){Object.keys(this.context.visual).sort((n,l)=>+n-+l).forEach(n=>{let l=setTimeout(()=>{let t=this.context.visual[n];this.video=this.icons.video[t.video],this.audio=this.icons.audio[t.audio],this.appContext.appChangeRef.markForCheck(),clearTimeout(l)},+n-this.context.startTime)})}onLoadedData(){this.context.className.active=!0,this.context.visual&&this.startVisual(),this.appContext.appChangeRef.markForCheck()}onEnded(){this.context.videoStart=this.context.className.active=!1,this.appContext.appChangeRef.markForCheck()}}class A{constructor(n,l){this.http=n,this.appContext=l,this.dataLoaded=!1,this.activeVideoBlocks=[];let t=Object.values(this.appContext.activeMessage.metadata),o=Math.min(...t.map(n=>n.startTime));this.videoMetadata=t.map(n=>{this.http.get(n.downLoadedUrl).subscribe(n=>{});let l={startTime:n.startTime,visual:n.visual,videoStart:!1,src:n.downLoadedUrl,uid:n.uid,local:n.local,contact:n.local?this.appContext.activeMessage.sender:this.appContext.activeMessage.receivers.find(l=>l.uid===n.uid),className:{local:n.local,[n.uid]:!0,active:!1,fixed:!1},t:setTimeout(()=>{l.videoStart=!0,clearTimeout(l.t),this.activeVideoBlocks.push(l),this.checkFixed(),this.appContext.appChangeRef.markForCheck()},n.startTime-o)};return l})}checkFixed(){this.activeVideoBlocks.length>1&&this.activeVideoBlocks.forEach(n=>{n.local&&(n.className.fixed=!0)})}ngOnInit(){}}var f=o.ob({encapsulation:0,styles:[["div.video-block-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;width:100%;height:100%;position:relative}.active-video-block[_ngcontent-%COMP%]{width:100%;height:100%}.video-block-toolbar[_ngcontent-%COMP%]{z-index:6;position:absolute;top:0;left:0;background:0 0;color:#fff}video.video-element[_ngcontent-%COMP%]{position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:50% 50%;object-position:50% 50%}div.video-metadata-container.local.active.fixed[_nghost-%COMP%]     .contact-name, div.video-metadata-container.local.active.fixed   [_nghost-%COMP%]     .contact-name{display:none}"]],data:{}});function g(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,11,"div",[["class","active-video-block"]],null,null,null,null,null)),(n()(),o.qb(1,0,null,null,9,"mat-toolbar",[["class","video-block-toolbar mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,c.b,c.a)),o.pb(2,4243456,null,1,s.a,[o.k,u.a,i.d],null,null),o.Hb(603979776,1,{_toolbarRows:1}),(n()(),o.qb(4,0,null,0,1,"app-contact",[],null,null,null,b.b,b.a)),o.pb(5,114688,null,0,d.a,[o.h,r.a,p.a,o.z],{context:[0,"context"]},null),(n()(),o.qb(6,0,null,0,0,"span",[["class","example-spacer"]],null,null,null,null,null)),(n()(),o.qb(7,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),o.pb(8,9158656,null,0,h.b,[o.k,h.d,[8,null],[2,h.a],[2,o.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),o.qb(9,0,null,0,1,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),o.pb(10,9158656,null,0,h.b,[o.k,h.d,[8,null],[2,h.a],[2,o.l]],{svgIcon:[0,"svgIcon"]},null),(n()(),o.qb(11,0,null,null,0,"video",[["autoplay",""],["class","video-element"],["playsinline",""]],[[8,"src",4]],[[null,"loadeddata"],[null,"ended"]],(function(n,l,t){var o=!0,e=n.component;return"loadeddata"===l&&(o=!1!==e.onLoadedData()&&o),"ended"===l&&(o=!1!==e.onEnded()&&o),o}),null,null))],(function(n,l){var t=l.component;n(l,5,0,t.context.contact),n(l,8,0,t.video),n(l,10,0,t.audio)}),(function(n,l){var t=l.component;n(l,1,0,o.Cb(l,2)._toolbarRows.length>0,0===o.Cb(l,2)._toolbarRows.length),n(l,7,0,o.Cb(l,8).inline,"primary"!==o.Cb(l,8).color&&"accent"!==o.Cb(l,8).color&&"warn"!==o.Cb(l,8).color),n(l,9,0,o.Cb(l,10).inline,"primary"!==o.Cb(l,10).color&&"accent"!==o.Cb(l,10).color&&"warn"!==o.Cb(l,10).color),n(l,11,0,t.context.src)}))}function x(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,2,"div",[["class","video-block-container"]],null,null,null,null,null)),(n()(),o.gb(16777216,null,null,1,null,g)),o.pb(2,16384,null,0,i.l,[o.N,o.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,l.component.context.videoStart)}),null)}var C=t("IheW"),k=o.ob({encapsulation:0,styles:[["div.video-player-container[_ngcontent-%COMP%]{display:flex;justify-content:stretch;align-items:stretch;width:100%;height:100%}div.video-metadata-container.local.active.fixed[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:200px;height:200px;z-index:5}div.video-metadata-container[_ngcontent-%COMP%]{transition:all .3s;flex:1 1 0}@media (orientation:landscape){div.video-player-container[_ngcontent-%COMP%]{flex-direction:row}}@media (orientation:portrait){div.video-player-container[_ngcontent-%COMP%]{flex-direction:column}}"]],data:{}});function w(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,4,"div",[["class","video-metadata-container"]],null,null,null,null,null)),o.Gb(512,null,i.y,i.z,[o.q,o.r,o.k,o.C]),o.pb(2,278528,null,0,i.j,[i.y],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),o.qb(3,0,null,null,1,"app-video-block",[],null,null,null,x,f)),o.pb(4,49152,null,0,m,[A,r.a],{context:[0,"context"]},null)],(function(n,l){n(l,2,0,"video-metadata-container",l.context.$implicit.className),n(l,4,0,l.context.$implicit)}),null)}function y(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,2,"div",[["class","video-player-container"]],null,null,null,null,null)),(n()(),o.gb(16777216,null,null,1,null,w)),o.pb(2,278528,null,0,i.k,[o.N,o.K,o.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,2,0,l.component.videoMetadata)}),null)}function M(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,1,"app-video-player",[],null,null,null,y,k)),o.pb(1,114688,null,0,A,[C.c,r.a],null,null)],(function(n,l){n(l,1,0)}),null)}var O=o.mb("app-video-player",A,M,{},{},[]),q=t("NcP4"),j=t("POq0"),P=t("QQfA"),F=t("IP0z"),_=t("JjoW"),z=t("Mz6y"),L=t("cUpR"),I=t("Xd0L"),N=t("gavF"),T=t("/Co4"),V=t("s7LF"),R=t("/q54"),J=t("iInd");class S{}var B=t("igqZ"),W=t("HsOI"),E=t("zMNK"),Z=t("hOhj"),D=t("5GAg"),G=t("Fwaw"),H=t("oapL"),K=t("ZwOa"),Q=t("8P0U"),U=t("W5yJ"),X=t("elxJ"),Y=t("rWV4"),$=t("KPQW"),nn=t("mkRZ"),ln=t("pBi1"),tn=t("lT8R"),on=t("7of8"),en=t("VDRc"),an=t("ura0"),cn=t("Nhcz"),sn=t("u9T3"),un=t("Gcy5");t.d(l,"VideoPlayerModuleNgFactory",(function(){return bn}));var bn=o.nb(e,[],(function(n){return o.zb([o.Ab(512,o.j,o.Z,[[8,[a.a,O,q.a]],[3,o.j],o.v]),o.Ab(4608,i.n,i.m,[o.s,[2,i.D]]),o.Ab(4608,j.c,j.c,[]),o.Ab(4608,P.c,P.c,[P.i,P.e,o.j,P.h,P.f,o.p,o.x,i.d,F.b,[2,i.h]]),o.Ab(5120,P.j,P.k,[P.c]),o.Ab(5120,_.a,_.b,[P.c]),o.Ab(5120,z.b,z.c,[P.c]),o.Ab(4608,L.e,I.c,[[2,I.g],[2,I.l]]),o.Ab(4608,I.b,I.b,[]),o.Ab(5120,N.a,N.d,[P.c]),o.Ab(5120,T.b,T.c,[P.c]),o.Ab(4608,V.e,V.e,[]),o.Ab(4608,V.w,V.w,[]),o.Ab(5120,o.b,(function(n,l){return[R.j(n,l)]}),[i.d,o.z]),o.Ab(1073742336,i.c,i.c,[]),o.Ab(1073742336,J.s,J.s,[[2,J.x],[2,J.o]]),o.Ab(1073742336,S,S,[]),o.Ab(1073742336,F.a,F.a,[]),o.Ab(1073742336,I.l,I.l,[[2,I.d],[2,L.f]]),o.Ab(1073742336,s.b,s.b,[]),o.Ab(1073742336,h.c,h.c,[]),o.Ab(1073742336,B.c,B.c,[]),o.Ab(1073742336,j.d,j.d,[]),o.Ab(1073742336,W.e,W.e,[]),o.Ab(1073742336,E.e,E.e,[]),o.Ab(1073742336,u.b,u.b,[]),o.Ab(1073742336,Z.b,Z.b,[]),o.Ab(1073742336,P.g,P.g,[]),o.Ab(1073742336,I.v,I.v,[]),o.Ab(1073742336,I.t,I.t,[]),o.Ab(1073742336,I.q,I.q,[]),o.Ab(1073742336,_.d,_.d,[]),o.Ab(1073742336,D.a,D.a,[]),o.Ab(1073742336,z.e,z.e,[]),o.Ab(1073742336,G.c,G.c,[]),o.Ab(1073742336,H.c,H.c,[]),o.Ab(1073742336,K.b,K.b,[]),o.Ab(1073742336,Q.c,Q.c,[]),o.Ab(1073742336,U.c,U.c,[]),o.Ab(1073742336,X.d,X.d,[]),o.Ab(1073742336,Y.j,Y.j,[]),o.Ab(1073742336,$.b,$.b,[]),o.Ab(1073742336,N.c,N.c,[]),o.Ab(1073742336,N.b,N.b,[]),o.Ab(1073742336,T.e,T.e,[]),o.Ab(1073742336,nn.a,nn.a,[]),o.Ab(1073742336,ln.d,ln.d,[]),o.Ab(1073742336,ln.c,ln.c,[]),o.Ab(1073742336,tn.a,tn.a,[]),o.Ab(1073742336,on.a,on.a,[]),o.Ab(1073742336,V.v,V.v,[]),o.Ab(1073742336,V.s,V.s,[]),o.Ab(1073742336,R.c,R.c,[]),o.Ab(1073742336,en.a,en.a,[]),o.Ab(1073742336,an.c,an.c,[]),o.Ab(1073742336,cn.a,cn.a,[]),o.Ab(1073742336,sn.a,sn.a,[[2,R.g],o.z]),o.Ab(1073742336,un.a,un.a,[]),o.Ab(1073742336,e,e,[]),o.Ab(1024,J.m,(function(){return[[{path:"",component:A}]]}),[])])}))}}]);
//# sourceMappingURL=19-es2015.dbbe0ab3706a3dee3d81.js.map